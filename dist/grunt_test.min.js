/*! grunt_test 22-03-2017 */
define(["uiGrid","uiRouter"],function(){var a=angular.module("BookStore",["ui.router","ui.grid","ui.grid.pagination","ui.grid.selection","ui.grid.exporter","ui.grid.importer"]);return a.config(["$controllerProvider","$compileProvider","$filterProvider","$provide",function(b,c,d,e){a.register={controller:b.register,directive:c.directive,filter:d.register,factory:e.factory,service:e.service},a.loadFile=function(a){return function(b,c){var d=c.defer(),e=[];return angular.isArray(a)?e=a:e.push(a),require(e,function(){b.$apply(function(){d.resolve()})}),d.promise}}}]),a}),define(["services/loadService"],function(a){a.register.controller("bookGridController",["$scope","$stateParams","loadJson",function(a,b,c){var d=function(a){var c=[];return a.forEach(function(d){if("0"===b.bookType||!b.bookType)return c=a,!1;d.type===b.bookType&&c.push(d)}),c};a.pageOptions={currentPage:1,pageSize:5,pageSizes:[5,10,15]},c.request("js/data/bookListData.json").success(function(b){a.bookListData=d(b),a.totalItems=b.length}),a.info=function(){1!==a.gridApi.selection.getSelectedCount()?alert("请选择一条信息"):alert(a.gridApi.selection.getSelectedRows()[0].title)},a.del=function(){0===a.gridApi.selection.getSelectedCount()?alert("请选择至少一条信息"):alert(a.gridApi.selection.getSelectedRows()[0].title)},a.gridOptions={data:"bookListData",enableGridMenu:!0,showGridFooter:!0,enableHorizontalScrollbar:1,enableVerticalScrollbar:0,enableSorting:!0,enableMinHeightCheck:!0,minimumColumnSize:10,headerTemplate:null,enablePagination:!0,enablePaginationControls:!0,paginationPageSizes:a.pageOptions.pageSizes,paginationCurrentPage:a.pageOptions.currentPage,paginationPageSize:a.pageOptions.pageSize,totalItems:"totalItems",enableFooterTotalSelected:!0,enableFullRowSelection:!1,enableRowHeaderSelection:!0,enableRowSelection:!0,enableSelectAll:!0,modifierKeysToMultiSelect:!1,multiSelect:!0,noUnselect:!1,selectionRowHeaderWidth:30,enableFiltering:!0,columnDefs:[{field:"index",displayName:"序号",width:70,enableColumnMenu:!1,enableSorting:!1},{field:"title",displayName:"书名"},{field:"author",displayName:"作者"},{field:"putTime",displayName:"出版日期"},{field:"price",displayName:"单价",cellFilter:'currency:"￥"'}],onRegisterApi:function(b){a.gridApi=b}}}])}),define(["services/loadService"],function(a){a.register.controller("bookTypeController",["$scope","loadJson",function(a,b){b.request("js/data/bookType.json").success(function(b){a.bookTypeDatas=b})}])}),define(["app"],function(a){a.register.controller("loginController",["$scope","$state",function(a,b){a.user={email:"1272695037@qq.com",password:"zaz3413887..*",checkout:!0},a.login=function(){a.prompt="正在登录。。。","1272695037@qq.com"==a.user.email&&"zaz3413887..*"==a.user.password?b.go("bookList",{bookType:0}):a.prompt="用户名或者密码输入错误"},a.reset=function(){a.user={email:"",password:"",checkout:!1}}}])}),define(["app"],function(a){a.config(["$stateProvider","$urlRouterProvider",function(b,c){c.otherwise("/index"),b.state("index",{url:"/index",views:{"":{templateUrl:"tpl/login.html",resolve:{loadFile:a.loadFile("controllers/loginController")}}}}).state("bookList",{url:"/{bookType:[0-9]}",views:{"":{templateUrl:"tpl/bookList.html"},"bookType@bookList":{templateUrl:"tpl/bookType.html",resolve:{loadFile:a.loadFile("controllers/bookTypeController")}},"bookGrid@bookList":{templateUrl:"tpl/bookGrid.html",resolve:{loadFile:a.loadFile(["uiGrid","controllers/bookGridController"])}}}})}])}),define(["app"],function(a){return a.register.factory("bookTypeService",[function(){return this.bookType="0",{getType:function(){return this._bookType},setType:function(a){this._bookType=a}}}]),a}),define(["app"],function(a){return a.register.factory("loadJson",["$http",function(a){var b=function(b){return a({method:"GET",url:b})};return{request:function(a){return b(a)}}}]),a});